--[[
    PREMIUM GUI SCRIPT - THENOGATO
    Version: 1.0
    Estructurado, optimizado y con funciones esenciales
--]]

-- ANTI-DUPLICADO
if game.CoreGui:FindFirstChild("THENOGATO") then
    game.CoreGui.THENOGATO:Destroy()
end

-- SERVICIOS
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")

-- GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "THENOGATO"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 300, 0, 200)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
MainFrame.BorderSizePixel = 0

-- TITULO PREMIUM
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "üöÄ THENOGATO - PREMIUM GUI"
Title.TextColor3 = Color3.fromRGB(255, 0, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16

-- VERIFICACI√ìN DE CLAVE
local KeyBox = Instance.new("TextBox", MainFrame)
KeyBox.PlaceholderText = "Enter Premium Key"
KeyBox.Size = UDim2.new(0.8, 0, 0, 30)
KeyBox.Position = UDim2.new(0.1, 0, 0.3, 0)
KeyBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyBox.ClearTextOnFocus = false

local CheckButton = Instance.new("TextButton", MainFrame)
CheckButton.Size = UDim2.new(0.6, 0, 0, 30)
CheckButton.Position = UDim2.new(0.2, 0, 0.55, 0)
CheckButton.BackgroundColor3 = Color3.fromRGB(0, 255, 150)
CheckButton.Text = "Verify"
CheckButton.TextColor3 = Color3.fromRGB(0, 0, 0)
CheckButton.Font = Enum.Font.GothamBold
CheckButton.TextSize = 14

-- GUI PRINCIPAL
local MainGui = Instance.new("Frame", ScreenGui)
MainGui.Visible = false
MainGui.Size = UDim2.new(0, 400, 0, 300)
MainGui.Position = UDim2.new(0.5, -200, 0.5, -150)
MainGui.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

-- NOTIFICACI√ìN
local function notify(txt)
    StarterGui:SetCore("SendNotification", {
        Title = "PREMIUM GUI",
        Text = txt,
        Duration = 3
    })
end

-- VALIDACI√ìN DE CLAVE
local validKey = "THENOGATO123"
CheckButton.MouseButton1Click:Connect(function()
    if KeyBox.Text == validKey then
        MainFrame.Visible = false
        MainGui.Visible = true
        notify("‚úÖ Acceso concedido")
    else
        KeyBox.Text = ""
        KeyBox.PlaceholderText = "‚ùå Clave inv√°lida"
    end
end)

-- FUNCIONES ESENCIALES
local flySpeed = 5
local flying = false
local BodyGyro, BodyVelocity

function Fly()
    flying = true
    local character = LocalPlayer.Character
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    BodyGyro = Instance.new("BodyGyro", humanoidRootPart)
    BodyVelocity = Instance.new("BodyVelocity", humanoidRootPart)
    BodyGyro.P = 9e4
    BodyGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    BodyVelocity.Velocity = Vector3.new(0, 0, 0)
    BodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)

    UIS.InputBegan:Connect(function(input)
        if not flying then return end
        if input.KeyCode == Enum.KeyCode.W then
            BodyVelocity.Velocity = workspace.CurrentCamera.CFrame.LookVector * flySpeed
        elseif input.KeyCode == Enum.KeyCode.S then
            BodyVelocity.Velocity = -workspace.CurrentCamera.CFrame.LookVector * flySpeed
        end
    end)
end

-- BOT√ìN FLY
local FlyButton = Instance.new("TextButton", MainGui)
FlyButton.Text = "üöÄ Fly"
FlyButton.Size = UDim2.new(0, 100, 0, 30)
FlyButton.Position = UDim2.new(0, 20, 0, 20)
FlyButton.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.Font = Enum.Font.GothamBold
FlyButton.TextSize = 14

FlyButton.MouseButton1Click:Connect(function()
    if not flying then
        Fly()
        notify("Fly activado")
    end
end)

-- ESP (RESALTADO RGB)
local espEnabled = false
local highlights = {}
local function createESP(player)
    if player ~= LocalPlayer and player.Character and not highlights[player] then
        local highlight = Instance.new("Highlight")
        highlight.Parent = player.Character
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.FillColor = Color3.fromRGB(math.random(100,255), math.random(100,255), math.random(100,255))
        highlight.OutlineColor = highlight.FillColor
        highlights[player] = highlight
    end
end

local function toggleESP()
    espEnabled = not espEnabled
    if espEnabled then
        for _, player in ipairs(Players:GetPlayers()) do
            createESP(player)
        end
        Players.PlayerAdded:Connect(function(p)
            p.CharacterAdded:Connect(function()
                wait(1)
                createESP(p)
            end)
        end)
        notify("ESP Activado")
    else
        for _, highlight in pairs(highlights) do
            highlight:Destroy()
        end
        highlights = {}
        notify("ESP Desactivado")
    end
end

-- BOT√ìN ESP
local ESPButton = Instance.new("TextButton", MainGui)
ESPButton.Text = "üîç ESP"
ESPButton.Size = UDim2.new(0, 100, 0, 30)
ESPButton.Position = UDim2.new(0, 20, 0, 60)
ESPButton.BackgroundColor3 = Color3.fromRGB(255, 150, 0)
ESPButton.TextColor3 = Color3.fromRGB(0, 0, 0)
ESPButton.Font = Enum.Font.GothamBold
ESPButton.TextSize = 14

ESPButton.MouseButton1Click:Connect(toggleESP)

-- TECLA PARA CERRAR GUI (F4)
UIS.InputBegan:Connect(function(input, gp)
    if gp then return end
    if input.KeyCode == Enum.KeyCode.F4 then
        ScreenGui:Destroy()
    end
end)
